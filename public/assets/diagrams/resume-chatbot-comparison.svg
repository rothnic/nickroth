<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 500" style="background: #fefefe;">
  <defs>
    <marker id="arrowhead-red" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#d32f2f"/>
    </marker>
    <marker id="arrowhead-green" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#388e3c"/>
    </marker>
  </defs>
  
  <!-- Title -->
  <text x="400" y="30" text-anchor="middle" font-family="system-ui, sans-serif" font-size="18" font-weight="600" fill="#1a1a1a">
    Why JSON Patches? Streaming vs Full Replacement
  </text>
  
  <!-- LEFT SIDE: Traditional Approach (PROBLEMATIC) -->
  <g transform="translate(50, 60)">
    <!-- Section header -->
    <rect x="0" y="0" width="320" height="35" rx="4" fill="#ffebee" stroke="#d32f2f" stroke-width="2"/>
    <text x="160" y="23" text-anchor="middle" font-family="system-ui, sans-serif" font-size="14" font-weight="600" fill="#d32f2f">
      ‚ùå Traditional: Text Replacement
    </text>
    
    <!-- Step 1 -->
    <g transform="translate(20, 50)">
      <rect x="0" y="0" width="280" height="70" rx="6" fill="#fafafa" stroke="#ddd" stroke-width="1"/>
      <text x="10" y="20" font-family="monospace, sans-serif" font-size="11" fill="#666">User asks: "Change job title"</text>
      <text x="10" y="40" font-family="monospace, sans-serif" font-size="10" fill="#333">AI must regenerate entire section</text>
      <text x="10" y="58" font-family="monospace, sans-serif" font-size="10" fill="#d32f2f">‚ùå Full document replacement</text>
    </g>
    
    <!-- Arrow -->
    <line x1="160" y1="130" x2="160" y2="155" stroke="#d32f2f" stroke-width="2" marker-end="url(#arrowhead-red)" stroke-dasharray="5,3"/>
    
    <!-- Step 2 -->
    <g transform="translate(20, 165)">
      <rect x="0" y="0" width="280" height="90" rx="6" fill="#fafafa" stroke="#ddd" stroke-width="1"/>
      <text x="10" y="20" font-family="monospace, sans-serif" font-size="11" fill="#666">PATCH request with text ranges:</text>
      <rect x="10" y="30" width="260" height="45" rx="3" fill="#fff" stroke="#ffcdd2" stroke-width="1"/>
      <text x="20" y="48" font-family="monospace, sans-serif" font-size="9" fill="#333">{find: "Senior Dev", replace: "Lead Dev"}</text>
      <text x="20" y="65" font-family="monospace, sans-serif" font-size="9" fill="#d32f2f">‚ö†Ô∏è Must match exact text. Can't stream.</text>
    </g>
    
    <!-- Arrow -->
    <line x1="160" y1="265" x2="160" y2="290" stroke="#d32f2f" stroke-width="2" marker-end="url(#arrowhead-red)" stroke-dasharray="5,3"/>
    
    <!-- Step 3: Problems -->
    <g transform="translate(20, 300)">
      <rect x="0" y="0" width="280" height="100" rx="6" fill="#ffebee" stroke="#d32f2f" stroke-width="1"/>
      <text x="140" y="25" text-anchor="middle" font-family="system-ui, sans-serif" font-size="12" font-weight="600" fill="#d32f2f">Problems:</text>
      <text x="140" y="48" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" fill="#666">‚Ä¢ Document drift over time</text>
      <text x="140" y="66" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" fill="#666">‚Ä¢ Formatting gets lost</text>
      <text x="140" y="84" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" fill="#666">‚Ä¢ Can't stream partial updates</text>
    </g>
  </g>
  
  <!-- RIGHT SIDE: JSON Patch Approach (BETTER) -->
  <g transform="translate(430, 60)">
    <!-- Section header -->
    <rect x="0" y="0" width="320" height="35" rx="4" fill="#e8f5e9" stroke="#388e3c" stroke-width="2"/>
    <text x="160" y="23" text-anchor="middle" font-family="system-ui, sans-serif" font-size="14" font-weight="600" fill="#388e3c">
      ‚úÖ JSON Patch: Surgical Updates
    </text>
    
    <!-- Step 1 -->
    <g transform="translate(20, 50)">
      <rect x="0" y="0" width="280" height="70" rx="6" fill="#fafafa" stroke="#ddd" stroke-width="1"/>
      <text x="10" y="20" font-family="monospace, sans-serif" font-size="11" fill="#666">User asks: "Change job title"</text>
      <text x="10" y="40" font-family="monospace, sans-serif" font-size="10" fill="#333">AI generates precise patch</text>
      <text x="10" y="58" font-family="monospace, sans-serif" font-size="10" fill="#388e3c">‚úì Streamable operations</text>
    </g>
    
    <!-- Arrow -->
    <line x1="160" y1="130" x2="160" y2="155" stroke="#388e3c" stroke-width="2" marker-end="url(#arrowhead-green)"/>
    
    <!-- Step 2 -->
    <g transform="translate(20, 165)">
      <rect x="0" y="0" width="280" height="90" rx="6" fill="#fafafa" stroke="#ddd" stroke-width="1"/>
      <text x="10" y="20" font-family="monospace, sans-serif" font-size="11" fill="#666">RFC 6902 JSON Patch operation:</text>
      <rect x="10" y="30" width="260" height="45" rx="3" fill="#fff" stroke="#c8e6c9" stroke-width="1"/>
      <text x="20" y="48" font-family="monospace, sans-serif" font-size="9" fill="#333">{op: "replace", path: "/work/0/title", </text>
      <text x="20" y="65" font-family="monospace, sans-serif" font-size="9" fill="#333"> value: "Lead Developer"}</text>
    </g>
    
    <!-- Arrow with streaming indicator -->
    <line x1="160" y1="265" x2="160" y2="290" stroke="#388e3c" stroke-width="2" marker-end="url(#arrowhead-green)"/>
    <text x="200" y="280" font-family="system-ui, sans-serif" font-size="10" fill="#388e3c" font-style="italic">‚Üê streams live</text>
    
    <!-- Step 3: Benefits -->
    <g transform="translate(20, 300)">
      <rect x="0" y="0" width="280" height="100" rx="6" fill="#e8f5e9" stroke="#388e3c" stroke-width="1"/>
      <text x="140" y="25" text-anchor="middle" font-family="system-ui, sans-serif" font-size="12" font-weight="600" fill="#388e3c">Benefits:</text>
      <text x="140" y="48" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" fill="#666">‚Ä¢ Instant surgical updates</text>
      <text x="140" y="66" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" fill="#666">‚Ä¢ No formatting loss</text>
      <text x="140" y="84" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" fill="#666">‚Ä¢ Real-time streaming UX</text>
    </g>
  </g>
  
  <!-- Bottom summary -->
  <g transform="translate(400, 480)">
    <rect x="-300" y="0" width="600" height="30" rx="4" fill="#e3f2fd" stroke="#1976d2" stroke-width="1"/>
    <text x="0" y="20" text-anchor="middle" font-family="system-ui, sans-serif" font-size="12" fill="#1565c0" font-weight="500">
      üí° The key difference: JSON Patch addresses fields by path (/work/0/title) rather than matching text content
    </text>
  </g>
</svg>