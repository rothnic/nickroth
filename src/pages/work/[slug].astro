---
import { type CollectionEntry, getCollection } from "astro:content";
import WorkCard from "../../components/WorkCard.astro";
import BaseLayout from "../../layouts/BaseLayout.astro";

export async function getStaticPaths() {
	const workEntries = await getCollection("work");
	return workEntries.map((entry: CollectionEntry<"work">) => ({
		params: { slug: entry.slug },
		props: { entry },
	}));
}

type Props = {
	entry: CollectionEntry<"work">;
};

const { entry } = Astro.props as Props;
---

<BaseLayout title={`${entry.data.title} - Nick Roth`} description={entry.data.description}>
  <main class="py-4" data-card-ref={entry.slug}>
    <div class="container mx-auto px-4 max-w-6xl">
      <!-- Navigation -->
      <div class="mb-6" transition:name="work-back-nav">
        <a href="/work" class="btn btn-ghost">← Back to Projects</a>
      </div>

      <!-- Use WorkCard component in expanded mode -->
      <WorkCard entry={entry} mode="expanded" />

      <!-- Navigation Footer -->
      <div class="pt-6 border-t border-base-300" transition:name="work-footer-nav">
        <div class="flex justify-between items-center">
          <a href="/work" class="btn btn-primary">
            ← View All Projects
          </a>
          <a href="/contact" class="btn btn-outline">
            Discuss Your Project →
          </a>
        </div>
      </div>
    </div>
  </main>
</BaseLayout>