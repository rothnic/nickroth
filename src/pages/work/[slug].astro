---
import BaseLayout from '../../layouts/BaseLayout.astro';
import Navbar from '../../components/Navbar.astro';
import { getCollection } from 'astro:content';

export async function getStaticPaths() {
  const workEntries = await getCollection('work');
  return workEntries.map(entry => ({
    params: { slug: entry.slug },
    props: { entry },
  }));
}

const { entry } = Astro.props;
const { Content } = await entry.render();
---

<BaseLayout title={`${entry.data.title} - Nick Roth`} description={entry.data.description}>
  <Navbar />
  
  <main class="py-20">
    <div class="container mx-auto px-4 max-w-4xl">
      <div class="mb-8">
        <a href="/work" class="btn btn-ghost mb-4">‚Üê Back to Work</a>
        
        {entry.data.image && (
          <figure class="mb-8">
            <img src={entry.data.image} alt={entry.data.title} class="w-full h-64 object-cover rounded-lg shadow-lg" />
          </figure>
        )}
        
        <h1 class="text-5xl font-bold mb-4">{entry.data.title}</h1>
        
        <div class="flex flex-wrap gap-4 mb-6 text-lg">
          <div class="badge badge-primary badge-lg">{entry.data.company}</div>
          <div class="badge badge-secondary badge-lg">{entry.data.role}</div>
        </div>
        
        <div class="text-sm opacity-75 mb-6">
          {entry.data.startDate.toLocaleDateString()} - {entry.data.endDate ? entry.data.endDate.toLocaleDateString() : 'Present'}
        </div>
        
        {entry.data.tags.length > 0 && (
          <div class="flex flex-wrap gap-2 mb-8">
            {entry.data.tags.map((tag) => (
              <div class="badge badge-outline">{tag}</div>
            ))}
          </div>
        )}
      </div>
      
      <div class="prose prose-lg max-w-none">
        <Content />
      </div>
    </div>
  </main>
</BaseLayout>